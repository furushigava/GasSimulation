# Документация: Графики второго закона термодинамики и энтропии

## Общее описание
Модуль `update_entropy_graphs` предоставляет 6 графиков для анализа энтропии и проверки второго закона термодинамики. Второй закон утверждает, что **энтропия изолированной системы не убывает** со временем. Эти графики демонстрируют этот фундаментальный принцип на примере модели идеального газа.

---

## 1. Энтропия скоростей от времени

### Что это такое?
Временная эволюция энтропии распределения скоростей частиц. Энтропия рассчитывается по формуле:
\[ S = -k_B \sum_i p_i \ln p_i \]
где \( p_i \) - вероятность нахождения частицы в i-м интервале скоростей.

### Как читать график:
- **Ось X**: Время
- **Ось Y**: Энтропия S (в единицах \( k_B = 1 \))
- **Синяя линия**: Энтропия S(t) со временем
- **Красная пунктирная**: Теоретическая максимальная энтропия S_max
- **Начальная точка**: Может быть низкой (начальное неравновесное состояние)

### Интерпретация:
- **Рост энтропии**: Система стремится к равновесию
- **Стабилизация**: Достижение максимума энтропии (равновесие)
- **Флуктуации**: Малые отклонения около равновесного значения
- **S_max**: Теоретический предел для идеального газа при данной T и V

### Физический смысл:
- **Низкая начальная энтропия**: Упорядоченное распределение скоростей
- **Высокая энтропия**: Равновесное (максвелловское) распределение
- **Неубывание**: Второй закон термодинамики

---

## 2. H-функция Больцмана

### Что это такое?
H-теорема Больцмана: функция \( H = \int f(v) \ln f(v) dv \) должна **убывать** со временем для газа, стремящегося к равновесию. Это эквивалентная формулировка второго закона.

### Как читать график:
- **Ось X**: Время
- **Ось Y**: H-функция
- **Зеленая линия**: H(t) со временем
- **Монотонное убывание**: Доказательство H-теоремы

### Интерпретация:
- **Убывающий тренд**: Выполнение H-теоремы
- **Стабилизация**: Достижение равновесия
- **Отношение к энтропии**: \( S = -H + const \)

### Математический смысл:
- H-теорема - первое статистическое обоснование необратимости
- Связь с энтропией: при стремлении к равновесию H → min, S → max
- Флуктуации в равновесии: малые колебания H около минимума

---

## 3. Пространственная энтропия

### Что это такое?
Энтропия пространственного распределения частиц. Показывает, насколько равномерно частицы распределены в объеме.

### Как читать график:
- **Ось X**: Время
- **Ось Y**: Пространственная энтропия
- **Фиолетовая линия**: S_пространств(t)
- **Красная пунктирная**: Максимальная энтропия (равномерное распределение)

### Интерпретация:
- **Рост энтропии**: Частицы равномерно заполняют объем
- **Начальные условия**:
  - Старт из угла: низкая начальная энтропия
  - Случайное распределение: высокая начальная энтропия
- **Диффузионный процесс**: Рост энтропии соответствует диффузии

### Физический смысл:
- **Максимальная энтропия**: Равномерное распределение по ячейкам
- **Размер сетки**: 10×10 ячеек, поэтому S_max = ln(100) ≈ 4.605
- **Термодинамический предел**: При N→∞ и мелкой сетке энтропия расходится

---

## 4. Скорость изменения энтропии (dS/dt)

### Что это такое?
Производная энтропии по времени. Показывает, насколько быстро изменяется энтропия.

### Как читать график:
- **Ось X**: Время
- **Ось Y**: dS/dt
- **Синяя линия (тонкая)**: Мгновенная производная
- **Красная линия (толстая)**: Скользящее среднее
- **Черная пунктирная**: Нулевая линия

### Интерпретация:
- **dS/dt > 0**: Энтропия растет (второй закон выполняется)
- **dS/dt ≈ 0**: Равновесие достигнуто
- **dS/dt < 0**: Флуктуации (временное уменьшение энтропии)
- **Амплитуда колебаний**: Интенсивность флуктуаций

### Важные моменты:
- **Среднее значение dS/dt ≥ 0**: Выполнение второго закона в среднем
- **Отрицательные флуктуации**: Возможны в малых системах (парадокс Лошмидта)
- **Скользящее среднее**: Показывает основной тренд, фильтруя шум

---

## 5. Пространственное распределение (тепловая карта)

### Что это такое?
Визуализация текущего распределения частиц по объему.

### Как читать график:
- **Ось X**: Координата x
- **Ось Y**: Координата y
- **Цветовая шкала**: Количество частиц в ячейке (от желтого - мало, до красного - много)
- **Равномерный цвет**: Равномерное распределение (максимальная энтропия)
- **Неоднородности**: Отклонения от равномерности

### Интерпретация:
- **Старт из угла**: В начале частицы сконцентрированы в углу
- **Диффузионное растекание**: Частицы заполняют весь объем
- **Равномерное распределение**: При достижении равновесия
- **Флуктуации плотности**: В равновесии возможны флуктуации

### Наблюдаемые эффекты:
- **Диффузия**: Растекание из начального сгустка
- **Равномерность**: Критерий равновесия
- **Размерные эффекты**: Влияние границ на распределение

---

## 6. Статистика и проверка второго закона

### Что это такое?
Текстовая панель с ключевыми параметрами и проверкой выполнения второго закона.

### Содержимое:
1. **Параметры системы**:
   - Число частиц N
   - Температура T
   - Объем V
   - Старт из угла (включен/выключен)

2. **Текущие значения**:
   - Энтропия скоростей
   - Пространственная энтропия
   - H-функция
   - Теоретический максимум S_max

3. **Проверка второго закона**:
   - ✓ dS/dt ≥ 0 - закон выполняется
   - ⚠ dS/dt < 0 - флуктуации (возможны в малых системах)
   - ⏳ Накопление данных

### Интерпретация статуса:
- **ВКЛЮЧЕН старт из угла**: Начальная низкая энтропия, явный рост
- **ВЫКЛЮЧЕН старт из угла**: Начальная высокая энтропия, малые изменения
- **S_теор_max**: Сравнение с текущей энтропией показывает степень равновесия

---

## Теоретические основы

### Формулы расчета:

1. **Энтропия скоростей**:
\[ S = -\sum_{i} p_i \ln p_i \]
где \( p_i = \frac{N_i}{N} \) - доля частиц в i-м интервале скоростей

2. **H-функция Больцмана**:
\[ H = \int f(v) \ln f(v) dv \]
где \( f(v) \) - функция распределения скоростей

3. **Теоретическая максимальная энтропия** (идеальный газ в 2D):
\[ S_{max} = N \left[ 1 + \ln\left(\frac{V}{N}\right) + \frac{1}{2}\ln(2\pi m k_B T) \right] \]

4. **Пространственная энтропия**:
\[ S_{space} = -\sum_{ij} p_{ij} \ln p_{ij} \]
где \( p_{ij} \) - вероятность нахождения в ячейке (i,j)

### Единицы измерения:
- Все энтропии в единицах \( k_B = 1 \)
- Температура в относительных единицах
- Объем в условных единицах (пикселях²)

---

## Физическая интерпретация

### Старт из угла (важная опция):
Когда включен "старт из угла", система начинается в явно неравновесном состоянии:
- **Начальные условия**: Все частицы в одном углу
- **Начальная энтропия**: Низкая (высокая упорядоченность)
- **Эволюция**: Диффузионное растекание по всему объему
- **Рост энтропии**: Явный и хорошо наблюдаемый

### Без старта из угла:
- **Начальные условия**: Случайное распределение
- **Начальная энтропия**: Высокая (близка к равновесной)
- **Эволюция**: Малые флуктуации около равновесия
- **Рост энтропии**: Незначительный

---

## Наблюдаемые явления

### 1. Стремление к равновесию:
- Все три энтропии (скоростей, пространственная, через H-функцию) стремятся к максимуму
- Время релаксации зависит от:
  - Числа частиц N
  - Температуры T
  - Начальных условий

### 2. Флуктуации в равновесии:
- В малых системах возможны заметные флуктуации
- Временные уменьшения энтропии (нарушения второго закота на коротких временах)
- При увеличении N флуктуации уменьшаются

### 3. Теорема H Больцмана:
- H-функция должна монотонно убывать
- Это статистическое доказательство необратимости
- Связь с возрастанием энтропии

---

## Практическое использование

### Для демонстрации второго закона:
1. **Включите "старт из угла"** для наглядной демонстрации
2. **Наблюдайте рост энтропии** на первых трех графиках
3. **Следите за dS/dt ≥ 0** в среднем

### Для исследования флуктуаций:
1. **Используйте малое число частиц** (N < 100)
2. **Наблюдайте флуктуации dS/dt** около нуля
3. **Изучите статистику флуктуаций**

### Для проверки теории:
1. **Сравните S(t) с S_max**
2. **Проверьте соотношение S = -H + const**
3. **Изучите зависимость времени релаксации от параметров**

---

## Важные замечания

### Ограничения модели:
1. **Малые системы**: Флуктуации значительны, второй закон выполняется статистически
2. **Идеальный газ**: Не учитываются взаимодействия между частицами
3. **Классическая статистика**: Квантовые эффекты не учитываются
4. **Двумерная система**: Особенности по сравнению с 3D

### Парадоксы и их разрешение:
1. **Парадокс обратимости Лошмидта**: В малых системах возможны обратные флуктуации
2. **Парадокс возврата Пуанкаре**: Для конечных систем возможно возвращение в начальное состояние
3. **Статистическая природа**: Второй закон - статистический, а не абсолютный

### Образовательная ценность:
1. **Наглядная демонстрация** фундаментального закона природы
2. **Связь микроскопического** и макроскопического описаний
3. **Введение в статистическую физику** через визуализацию
4. **Понимание необратимости** на молекулярном уровне

Эти графики вместе образуют мощный инструмент для изучения второго закона термодинамики, демонстрируя как рост энтропии, так и статистическую природу этого фундаментального принципа.